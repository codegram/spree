<%= render :partial => 'admin/shared/order_tabs', :locals => {:current => "Payments"} %>

<h2><%= t("activerecord.models.#{@object.class.to_s.underscore}.one") %></h2>

<p>
  <label><%= t("amount") %>:</label></td>
  <%= object.amount %>
</p>

<% if object.source.is_a? Creditcard %>
<fieldset>
  <legend><%= t('creditcard') %></legend>

  <table class="index">
    <tr>
      <th colspan="6"><%= t('card_details') %></th>
    </tr>
    <tr>
      <td><label><%= t("card_number") %>:</label></td>
      <td>
        XXXX-XXXX-XXXX-<%= object.source.display_number %>
      </td>
      <td><label><%= t("expiration") %>:</label></td>
      <td>
        <%= object.source.month %>/<%= object.source.year %>
      </td>
      <td><label><%= t("card_code") %>:</label></td>
      <td>
        <%= object.source.verification_value %>
      </td>
    </tr>
    <tr>
      <td><label><%= t("maestro_or_solo_cards") %>:</label></td>
      <td>
        <%= object.source.issue_number %>
      </td>
      <td><label><%= t('start_date') %>:</label></td>
      <td colspan="3">
        <%= object.source.start_month %>/<%= object.source.start_year %>
      </td>
    </tr>
  </table>
</fieldset>
<% end %>

<% if @payment.source.is_a?(Creditcard) and @payment.txns.any? %>
  <%= render 'transaction_list', :txns => @payment.txns %>
<% end %>
